# 2.1.4. Módulo 4 - Visualización de Productos - Hideki Sotero

Este módulo se centra en ofrecer a los clientes una experiencia de navegación clara y atractiva sobre el catálogo de productos del emprendimiento de ropa. Incluye la presentación de los artículos con imágenes, descripciones, tallas, precios y disponibilidad en tiempo real, de manera que los usuarios puedan explorar y seleccionar productos de forma sencilla antes de proceder a la compra.

## Alcance
Permitir a los usuarios explorar el catálogo (lista y detalle), encontrar productos mediante búsqueda/filtrado/ordenamiento, revisar variantes (talla/color), verificar disponibilidad y descuentos en tiempo real, y continuar hacia la compra o guardar favoritos.

## Supuestos
- El catálogo se consume desde un backend (Node.js + PostgreSQL) vía API REST/GraphQL.
- Stock y precios se sincronizan con el módulo de compras/gestión en tiempo (casi) real.
- Las imágenes están servidas desde un CDN con variantes responsive.

## Requisitos Funcionales

### RF-VP-01 Listado de catálogo
El sistema muestra una grilla/lista de productos con imagen, nombre, precio, precio tachado (si aplica) y etiqueta de disponibilidad.

- **Aceptación**: dada una categoría con productos, cuando el usuario ingresa, entonces ve al menos 12 ítems iniciales y placeholders de carga.

---

### RF-VP-02 Paginación / Carga incremental
La vista soporta paginación o “infinite scroll”.

- **Aceptación**: cuando el usuario llega al 80% del scroll, el sistema solicita la siguiente página y la agrega sin romper el orden.

---

### RF-VP-03 Búsqueda por texto
El usuario puede buscar por nombre, palabra clave o código.

- **Aceptación**: al escribir ≥3 caracteres y presionar Enter, la lista se actualiza; las coincidencias resaltan el término buscado.

---

### RF-VP-04 Filtros dinámicos
Filtros por categoría, talla, color, rango de precio y estado (nuevo/oferta).

- **Aceptación**: al aplicar filtros múltiples, el resultado refleja la intersección; el chip de cada filtro puede removerse individualmente.

---

### RF-VP-05 Ordenamiento
Orden por relevancia, precio (asc/desc) y novedades.

- **Aceptación**: al cambiar el orden, la primera página se recarga en <1.5s (p75) manteniendo filtros activos.

---

### RF-VP-06 Detalle de producto (PDP)
Página con galería de imágenes, descripción, composición, guía de tallas, precio, variaciones, disponibilidad por variante y políticas de cambio/devolución.

- **Aceptación**: al abrir un producto válido, se muestran al menos 3 imágenes, selector de talla/color y stock por variante.

---

### RF-VP-07 Variantes y disponibilidad
Selección de color/talla actualiza precio, SKU y stock.

- **Aceptación**: al elegir una variante agotada, se deshabilita “Agregar al carrito” y se muestra “Sin stock” con CTA de alerta de disponibilidad (si está habilitado).

---

### RF-VP-08 Etiquetas y promociones
Mostrar badges como “Nuevo”, “-20%”, “Últimas unidades”, “2x1”.

- **Aceptación**: si existe una promo activa, se renderiza el badge y el precio promocional con cálculo correcto del descuento.

---

### RF-VP-09 Recomendaciones
Bloques de “Productos relacionados” y “Vistos recientemente”.

- **Aceptación**: en la PDP se presentan ≥6 recomendaciones; si no hay señales, se muestra fallback por categoría.

---

### RF-VP-10 Wishlist / Favoritos
Permite guardar/quitar productos del listado personal.

- **Aceptación**: al tocar el ícono de favorito, el estado se persiste (local + cuenta) y se refleja en todas las vistas.

---

### RF-VP-11 Compartir y Deep Link
Genera enlaces compartibles a PDP con UTM opcional.

- **Aceptación**: al usar “Compartir”, se copia la URL canónica y al abrirla aterriza directamente en la variante seleccionada (si estaba en la URL).

---

### RF-VP-12 Accesibilidad y SEO
Soporta navegación por teclado, textos alternativos y metadatos SEO (title, meta description, Open Graph).

- **Aceptación**: elementos interactivos tienen focus-visible; imágenes tienen `alt`; la PDP define `og:image`, `og:title`, `og:description`.

---

### RF-VP-13 Estados vacíos y errores
Mensajes claros cuando no hay resultados o hay fallo de red.

- **Aceptación**: con filtros sin coincidencias, se muestra “Sin resultados” + CTA “Limpiar filtros”; ante error 5xx, botón “Reintentar”.

---

### RF-VP-14 Performance y placeholders
Uso de imágenes responsive, lazy-load y skeletons.

- **Aceptación**: LCP de PDP ≤ 2.5s (p75) en 4G; imágenes usan `srcset`/`sizes`; listas muestran skeleton mientras cargan.

---

### RF-VP-15 Integración con carrito
Botón “Agregar al carrito” disponible desde listado y PDP.

- **Aceptación**: al agregar, se confirma con toast y mini-cart; si faltan variaciones, se exige selección previa.

---

### RF-VP-16 Telemetría ética
Registra (anonimizado) vistas de PDP, uso de filtros, tasa de clic en recomendaciones y add-to-cart.

- **Aceptación**: eventos incluyen `session_id` no sensible, `product_id`, `variant_id`, `category`, `price`, `currency`.

---

### RF-VP-17 Internacionalización (opcional)
Moneda/formato de precio y tallas localizables.

- **Aceptación**: al cambiar región `PE→US`, moneda y separadores se actualizan; guía de tallas cambia a la tabla correspondiente.

---

### RF-VP-18 Caching y modo offline ligero (opcional)
Cachea últimos listados y PDP para re-visitas rápidas.

- **Aceptación**: al volver a una PDP visitada, la vista aparece desde cache en <300ms y se revalida en background.

### Requisitos de Atributos de Calidad

| Atributo de Calidad | Estímulo | Fuente del Estímulo | Artefacto | Entorno | Respuesta | Medida de Respuesta |
|----------------------|----------|----------------------|------------|---------|-----------|----------------------|
| Disponibilidad | Un cliente accede al catálogo y uno de los servicios de imágenes falla | Cliente | Servicio de imágenes | Horario laboral | El sistema carga imágenes desde un servidor alterno | 99.9% de disponibilidad anual |
| Rendimiento | El cliente aplica un filtro sobre un catálogo de más de 20,000 productos | Cliente | Motor de búsqueda y filtros | Operación normal | El sistema responde sin retardos perceptibles | Tiempo de respuesta < 3 segundos |
| Seguridad | Usuario intenta manipular la URL para ver productos ocultos o restringidos | Usuario externo | Backend de catálogo | Acceso remoto | El sistema bloquea el acceso y registra el intento | 100% de accesos no autorizados son denegados |
| Usabilidad | Cliente nuevo explora el catálogo por primera vez | Cliente | Interfaz web/móvil de catálogo | Operación normal | El sistema muestra un diseño intuitivo con navegación clara | Tiempo de aprendizaje < 5 minutos |
| Mantenibilidad | Se requiere añadir un nuevo criterio de filtrado (ej. material de la prenda) | Equipo de desarrollo | Backend de catálogo | Entorno de desarrollo | La funcionalidad se implementa sin afectar módulos relacionados | Tiempo de despliegue < 2 horas |

### Restricciones
- El módulo de Visualización de Productos deberá implementarse con un **frontend responsivo** desarrollado en React.js.  
- Deberá integrarse con el backend en Node.js y la base de datos PostgreSQL para obtener información en tiempo real.  
- El diseño de la interfaz deberá cumplir con las guías de experiencia de usuario establecidas por el proyecto.  
- La actualización de stock deberá estar sincronizada con el módulo de compras para garantizar consistencia de la información.  
