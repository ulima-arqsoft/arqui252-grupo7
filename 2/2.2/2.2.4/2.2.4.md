# 2.2.4. M√≥dulo ‚Äî Visualizaci√≥n de Productos - Hideki Sotero

## üõçÔ∏è Contexto
Los Atributos de Calidad del m√≥dulo deben garantizar una experiencia de exploraci√≥n r√°pida, accesible y confiable del cat√°logo, aun bajo carga alta o fallas parciales de servicios (CDN, b√∫squeda, precios/stock). Se priorizan rendimiento, disponibilidad, usabilidad, seguridad, accesibilidad, compatibilidad, observabilidad y mantenibilidad.

## üåÄ Escenarios

**ESCENARIO 1: Carga inicial del cat√°logo (Rendimiento)**

**Atributo de Calidad:** Rendimiento y Eficiencia  
**Condici√≥n Inicial:** Usuario entra a la home/categor√≠a con red 4G.  
**Acci√≥n**:  
1. El frontend solicita la primera p√°gina (‚â•12 √≠tems) y assets cr√≠ticos.  
2. Muestra skeletons mientras llegan datos e im√°genes responsive (CDN).  
**Resultado Esperado**:  
- LCP de la vista ‚â§ **2.5s** (p75).  
- TTFB API cat√°logo ‚â§ **800 ms** (p75).  
- Im√°genes lazy-load por debajo del fold.

---
---

**ESCENARIO 2: Filtrado y ordenamiento (Rendimiento/Usabilidad)**

**Atributo de Calidad:** Rendimiento y Usabilidad  
**Condici√≥n Inicial:** Lista cargada, usuario aplica m√∫ltiples filtros y cambia orden.  
**Acci√≥n**:  
1. El cliente env√≠a query con filtros combinados y `page=1`.  
2. Renderiza resultados y mantiene chips de filtros activos.  
**Resultado Esperado**:  
- Tiempo de respuesta de filtros/orden ‚â§ **1.5s** (p75).  
- Interfaz permanece interactiva (INP ‚â§ **200 ms** p75).  
- Estado de filtros/restauraci√≥n al back/forward correcto.

---
---

**ESCENARIO 3: Detalle de Producto (PDP) con variantes (Confiabilidad)**

**Atributo de Calidad:** Confiabilidad y Consistencia  
**Condici√≥n Inicial:** Usuario abre una PDP con variantes talla/color.  
**Acci√≥n**:  
1. Selecciona una variante; se consulta precio/stock en tiempo real.  
2. UI actualiza SKU, precio y disponibilidad.  
**Resultado Esperado**:  
- Desfase stock entre UI y backend < **1 seg**.  
- Inconsistencias de stock < **0.1%** de solicitudes (p95).  
- Nunca se permite ‚ÄúAgregar‚Äù cuando stock=0.

---
---

**ESCENARIO 4: Ca√≠da del servicio de im√°genes (Disponibilidad/Resiliencia)**

**Atributo de Calidad:** Disponibilidad y Tolerancia a Fallos  
**Condici√≥n Inicial:** CDN de im√°genes responde 5xx.  
**Acci√≥n**:  
1. Frontend detecta errores y cambia a thumbnail/fallback local.  
2. Se registra el incidente en observabilidad.  
**Resultado Esperado**:  
- Cat√°logo y PDP siguen funcionales (texto, precios) con placeholders.  
- Disponibilidad mensual ‚â• **99.9%**.  
- Tiempo de conmutaci√≥n a fallback ‚â§ **300 ms**.

---
---

**ESCENARIO 5: Accesibilidad AA (WCAG) en cat√°logo y PDP (Accesibilidad)**

**Atributo de Calidad:** Accesibilidad y Usabilidad  
**Condici√≥n Inicial:** Usuario con navegaci√≥n por teclado/lector de pantalla.  
**Acci√≥n**:  
1. Recorre tarjetas, filtros y botones con Tab/Shift+Tab.  
2. Lector anuncia im√°genes (alt), precios, badges y estado de stock.  
**Resultado Esperado**:  
- Contraste cumple WCAG AA.  
- Orden de foco l√≥gico; `aria-label` en controles.  
- Navegaci√≥n completa sin mouse.

---
---
  
**ESCENARIO 6: Intento de acceso a productos ocultos (Seguridad)**

**Atributo de Calidad:** Seguridad  
**Condici√≥n Inicial:** Usuario manipula la URL/params para ver productos ‚Äúno publicados‚Äù.  
**Acci√≥n**:  
1. Solicita PDP de un SKU con flag `draft=false`.  
2. Backend valida flags de visibilidad y rol.  
**Resultado Esperado**:  
- Devoluci√≥n **404/403** y evento de seguridad registrado.  
- **100%** de accesos no autorizados denegados.

---
---

**ESCENARIO 7: Compatibilidad multi-dispositivo (Compatibilidad)**

**Atributo de Calidad:** Compatibilidad e Interoperabilidad  
**Condici√≥n Inicial:** Usuario usa Chrome/Firefox/Safari/Edge y m√≥viles iOS/Android.  
**Acci√≥n**:  
1. Abre cat√°logo y PDP, interact√∫a con filtros y agrega al carrito.  
**Resultado Esperado**:  
- Soporte para √∫ltimas **2 versiones** de navegadores principales.  
- Render responsivo sin desbordes; fallos de UI < **0.5%** de sesiones.

---
---

**ESCENARIO 8: SEO/Compartibilidad social (Eficiencia/Usabilidad)**

**Atributo de Calidad:** Eficiencia y Descubribilidad (SEO)  
**Condici√≥n Inicial:** Crawler o usuario comparte PDP en RRSS.  
**Acci√≥n**:  
1. SSR/SSG entrega HTML con `title`, `meta description`, `og:*` y JSON-LD de producto.  
2. Enlaces comparten preview con imagen y precio.  
**Resultado Esperado**:  
- CLS ‚â§ **0.1** (p75) en PDP.  
- Metadatos completos en 100% de PDP indexables.  
- Rich Snippets v√°lidos en pruebas de Google.

---
---

**ESCENARIO 9: Intermitencia del backend de precios/stock (Resiliencia)**

**Atributo de Calidad:** Fiabilidad y Degradaci√≥n Elegante  
**Condici√≥n Inicial:** API de precios/stock responde con latencia alta o 5xx.  
**Acci√≥n**:  
1. Frontend usa cache temporal (stale-while-revalidate) y muestra aviso ‚ÄúActualizando stock‚Ä¶‚Äù.  
2. Reintenta con backoff exponencial.  
**Resultado Esperado**:  
- UI no se bloquea; error toast claro y opci√≥n reintentar.  
- Tasa de reintentos exitosa ‚â• **90%** en 2 intentos.  

---
---

**ESCENARIO 10: Observabilidad y telemetr√≠a (Observabilidad)**

**Atributo de Calidad:** Observabilidad  
**Condici√≥n Inicial:** Navegaci√≥n t√≠pica por cat√°logo/PDP.  
**Acci√≥n**:  
1. Se emiten m√©tricas RUM (LCP, INP, CLS) y eventos (filtros, add-to-cart).  
2. Se trazan llamadas a APIs con correlaci√≥n `trace_id`.  
**Resultado Esperado**:  
- Cobertura de eventos ‚â• **95%** de sesiones v√°lidas.  
- Alertas cuando LCP > **2.5s** (p75) por 15 min consecutivos.

---
---

**ESCENARIO 11: Internacionalizaci√≥n de moneda y tallas (Usabilidad/Mantenibilidad)**

**Atributo de Calidad:** Usabilidad y Mantenibilidad  
**Condici√≥n Inicial:** Usuario cambia regi√≥n/idioma.  
**Acci√≥n**:  
1. Se actualiza moneda, formato y gu√≠a de tallas; precios se recalculan (tax/FX).  
**Resultado Esperado**:  
- Cambio de regi√≥n refleja nuevos formatos en < **1s**.  
- Conversi√≥n de precios consistente (desviaci√≥n < **0.5%** de tabla FX).  
- Implementaci√≥n desacoplada (sin cambios en l√≥gica de negocio).

---
---

**ESCENARIO 12: Despliegue seguro sin downtime (Mantenibilidad/Disponibilidad)**

**Atributo de Calidad:** Mantenibilidad y Disponibilidad  
**Condici√≥n Inicial:** Nueva versi√≥n de la UI de cat√°logo.  
**Acci√≥n**:  
1. Despliegue blue-green/canary del frontend y cache busting controlado.  
2. Monitoreo de m√©tricas clave y rollback autom√°tico si degradan.  
**Resultado Esperado**:  
- Downtime **0** para usuarios finales.  
- Rollback < **5 min** si error rate > **2%** o LCP empeora > **20%**.
