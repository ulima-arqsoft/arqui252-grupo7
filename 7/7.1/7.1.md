> [7. Estructura Inicial de C√≥digo](../7.md) ‚Ä∫ [7.1. Cat√°logo de Aplicaciones](7.1.md)

# 7.1. Cat√°logo de Aplicaciones

### 7.1.1. iOS (Swift) ‚Äî Clean Architecture

La aplicaci√≥n m√≥vil para iOS est√° desarrollada en **Swift**, utilizando **SwiftUI** y **Combine**, bajo el patr√≥n **Clean Architecture**.  
Este enfoque permite mantener un bajo acoplamiento entre capas, independencia de frameworks y alta testabilidad, siguiendo la direcci√≥n de dependencias **Presentation ‚Üí Domain ‚Üí Data**.

**Aplicaci√≥n** | **Contenedor** | **Tecnolog√≠a FE** | **Tecnolog√≠a BE** | **BD (local)** | **Repositorio/Carpeta**
---|---|---|---|---|---
App iOS cliente | Mobile (iOS) | SwiftUI, Combine, MVVM | .NET API C# (REST) | UserDefaults / CoreData | `https://github.com/ulima-arqsoft/arqui252-grupo7-mobile-ios/tree/develop`

> Estructura general del proyecto en Xcode:  
> ![swift_loop_app](images/swift_loop_app.png)

---

#### Estructura de carpetas

- `Loop/App/Data/` ‚Äî fuentes de datos, implementaci√≥n de repositorios.  
- `Loop/App/Data/Datasources/` ‚Äî acceso remoto (API REST) o local (UserDefaults, CoreData).  
- `Loop/App/Data/Repositories/` ‚Äî implementaci√≥n concreta de interfaces del dominio.  

- `Loop/App/Domain/` ‚Äî entidades, errores y casos de uso del negocio (agn√≥sticos de framework).  
- `Loop/App/Domain/Models/` ‚Äî modelos de dominio como `Cart`, `Product`, `User`.  
- `Loop/App/Domain/UseCases/` ‚Äî casos de uso principales: agregar producto, eliminar item, sincronizar carrito.  

- `Loop/App/Infrastructure/` ‚Äî capa t√©cnica: red, persistencia y servicios auxiliares.  
- `Loop/App/Infrastructure/Networking/` ‚Äî cliente HTTP con `URLSession`, autenticaci√≥n JWT, manejo de errores.  
- `Loop/App/Infrastructure/UserDefaults/` ‚Äî almacenamiento ligero de preferencias y carrito invitado.  

- `Loop/App/Presentation/` ‚Äî capa de presentaci√≥n (UI + ViewModels).  
- `Loop/App/Presentation/Scenes/` ‚Äî vistas y pantallas (SwiftUI) organizadas por m√≥dulo:  
  - `Cart/` ‚Äî gesti√≥n del carrito (RF-GC-01, RF-GC-02).  
  - `Explore/` ‚Äî cat√°logo de productos.  
  - `Product/` ‚Äî detalle de producto.  
  - `Profile/` ‚Äî perfil e historial de compras (RF-GC-09).  
  - `TabView/` ‚Äî navegaci√≥n principal.  
- `Loop/App/Presentation/Shared/` ‚Äî componentes visuales reutilizables (botones, headers, estilos).

- `Loop/App/SupportingFiles/` ‚Äî recursos, assets, configuraciones.  
- `Loop/App/Info/` ‚Äî metadatos del proyecto (`Info.plist`).  
- `AppDelegate.swift` / `LoopApp.swift` ‚Äî punto de entrada y configuraci√≥n inicial del entorno.

---

#### Decisiones t√©cnicas principales

- **Arquitectura:** Clean Architecture + MVVM (separaci√≥n estricta de UI, dominio y datos).  
- **Estado global:** `@StateObject` + `ObservableObject` para reactividad y sincronizaci√≥n con backend.  
- **Networking:** `URLSession` con `async/await`, encabezados `Authorization` (JWT) y `X-Request-Id`.  
- **Persistencia:** `UserDefaults` para carrito local; `CoreData` opcional para cachear cat√°logo y precios.  
- **Casos de uso:** definidos en *Domain*, independientes de frameworks, probados con `XCTest`.  
- **Accesibilidad:** compatibilidad con *VoiceOver* y *Dynamic Type*.  
- **Integraci√≥n backend:** consumo de endpoints `/carts`, `/checkout`, `/orders` del backend .NET + PostgreSQL.

---

#### Ejemplo de correspondencia conceptual

| Capa | Funci√≥n | Ejemplo |
|------|----------|----------|
| **Data** | Fuente de datos (repositorios, API, almacenamiento) | `CartRepository.swift`, `CartRemoteDataSource.swift` |
| **Domain** | L√≥gica de negocio, entidades y casos de uso | `AddProductUseCase.swift`, `Cart.swift` |
| **Infrastructure** | Servicios de soporte t√©cnico | `NetworkClient.swift`, `UserDefaultsService.swift` |
| **Presentation** | UI y ViewModels | `CartView.swift`, `CartViewModel.swift` |

---

> En conjunto, esta arquitectura garantiza independencia del framework, soporte offline-first y sincronizaci√≥n confiable del carrito, alineada con los requisitos funcionales y no funcionales del *Ecommerce de Ropa*.


---

### 7.1.2. Android (Kotlin) ‚Äî Clean Architecture

La aplicaci√≥n m√≥vil para **Android** est√° desarrollada en **Kotlin**, utilizando **Jetpack Compose** para la interfaz de usuario y principios de **Clean Architecture**, siguiendo la direcci√≥n de dependencias **Presentation ‚Üí Domain ‚Üí Data**.  
Esta estructura modular garantiza bajo acoplamiento, f√°cil testeo e independencia de frameworks, alineada con las buenas pr√°cticas promovidas por **Phillip Lackner**.

**Aplicaci√≥n** | **Contenedor** | **Tecnolog√≠a FE** | **Tecnolog√≠a BE** | **BD (local)** | **Repositorio/Carpeta**
---|---|---|---|---|---
App Android cliente | Mobile (Android) | Jetpack Compose, MVVM, Hilt | .NET API C# (REST) | Room / DataStore | `/android/app`

> Estructura general del proyecto en Android Studio:  
> ![android_loop_app](images/file_structure_android_app.png)

---

#### Estructura de carpetas

- `app/src/main/java/arqsoft/ulima/loop_app/`

  - **`core/`** ‚Äî componentes compartidos y utilitarios del n√∫cleo de la aplicaci√≥n.
    - `data.sessionStorage/` ‚Äî almacenamiento local de sesi√≥n (tokens, usuario autenticado).
    - `domain/` ‚Äî modelos y l√≥gica de negocio compartida.
    - `presentation/` ‚Äî componentes comunes de UI (`components`, `designsystem`).

  - **`di/`** ‚Äî m√≥dulos de **Hilt** para la inyecci√≥n de dependencias (repositorios, casos de uso, clientes HTTP).

  - **`features/`** ‚Äî contiene los distintos m√≥dulos funcionales de la app (por ejemplo: *auth*, *catalog*, *cart*, *profile*).  
    Cada *feature* sigue el patr√≥n **Clean Architecture** con sus propias capas:
    - `data/` ‚Äî *data sources*, repositorios e implementaci√≥n de interfaces del dominio.
    - `domain/` ‚Äî entidades y casos de uso espec√≠ficos del m√≥dulo.
    - `presentation/` ‚Äî pantallas, *ViewModels* y estados de UI (Compose).

  - **`main/`** ‚Äî punto de entrada de la aplicaci√≥n (navegaci√≥n principal, configuraci√≥n inicial de Compose).

  - **`util.networking/`** ‚Äî cliente HTTP y utilidades de red.
    - `connectionManager/` ‚Äî gesti√≥n de conectividad y disponibilidad de red.
    - `HttpClientExt.kt`, `HttpClientFactory.kt` ‚Äî configuraci√≥n base del cliente Ktor (timeouts, headers, logging).

- `res/` ‚Äî recursos gr√°ficos, layouts XML (si aplica), cadenas de texto, √≠conos y temas.

---

#### Decisiones t√©cnicas principales

- **Arquitectura:** Clean Architecture + MVVM + Hilt (inyecci√≥n de dependencias).  
- **UI:** Jetpack Compose con *State Hoisting* y componentes reutilizables (`designsystem`).  
- **Estado global:** `ViewModel` + `StateFlow` / `MutableStateFlow` para la reactividad.  
- **Networking:** Cliente **Ktor** con interceptores para autenticaci√≥n y logging.  
- **Persistencia:** **Room** (bases de datos locales) y **DataStore** (preferencias ligeras).  
- **Inyecci√≥n de dependencias:** **Hilt** (m√≥dulos definidos en `/di`).  
- **Testing:** *Unit Tests* en `test/` y *instrumentation tests* en `androidTest/`.  
- **Manejo de errores:** `sealed classes` en el dominio para resultados seguros (`Result<T>` o `Resource<T>`).  
- **Navegaci√≥n:** `NavHost` de Compose con rutas definidas por feature.

---

#### Ejemplo de correspondencia conceptual

| Capa | Funci√≥n | Ejemplo |
|------|----------|----------|
| **Data** | Acceso a fuentes de datos (API REST, Room, DataStore) | `AuthRepositoryImpl.kt`, `CatalogRemoteDataSource.kt` |
| **Domain** | L√≥gica de negocio, entidades y casos de uso | `LoginUseCase.kt`, `Product.kt` |
| **Presentation** | Interfaz de usuario y estado | `LoginScreen.kt`, `CatalogViewModel.kt` |
| **Core / Util** | Componentes comunes y servicios t√©cnicos | `HttpClientFactory.kt`, `SessionStorage.kt` |

---

> Esta arquitectura asegura independencia entre capas, alta mantenibilidad y escalabilidad, promoviendo pruebas unitarias y modularizaci√≥n por funcionalidades, acorde con las buenas pr√°cticas del *Ecommerce de Ropa*.

[üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../7.2/7.2.md)